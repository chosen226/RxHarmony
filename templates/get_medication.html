<!DOCTYPE html>
<html lang="en">
  {% extends 'base.html' %} {% load static %} {% block title %}Over the Counter
  Prescription - RxHarmony{% endblock %}{% block content %}
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Over the Counter Prescription</title>
    <link rel="stylesheet" href="/static/css/styles.css" />
  </head>
  <body>
    <div class="container">
      <main>
        <!-- Health Information Summary Card -->
        <section class="health-section">
          <div class="card">
            <div class="card-header">
              <h2>Your Health Information Summary</h2>
            </div>
            <div class="health-info-container">
              <div class="health-grid">
                <div class="health-section">
                  <h3>Current Medications</h3>
                  <ul id="medicationsList" class="summary-list">
                    <li class="empty-state">Loading medications...</li>
                  </ul>
                </div>
                <div class="health-section">
                  <h3>Allergies</h3>
                  <div id="allergiesContainer" class="summary-content">
                    <p class="empty-state">Loading allergies...</p>
                  </div>
                </div>
              </div>
              <div class="summary-section">
                <h3>Medical Conditions</h3>
                <ul id="conditionsList" class="summary-list">
                  <li class="empty-state">Loading conditions...</li>
                </ul>
              </div>
              <div class="summary-section">
                <h3>Personal Details</h3>
                <div id="personalDetails" class="summary-content">
                  <p>
                    <strong>Age:</strong>
                    <span id="ageDisplay">Loading...</span>
                  </p>
                  <p>
                    <strong>Gender:</strong>
                    <span id="genderDisplay">Loading...</span>
                  </p>
                  <p>
                    <strong>Blood Type:</strong>
                    <span id="bloodTypeDisplay">Loading...</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- Get OTC Prescription Card -->
        <section class="otc-prescription-section">
          <div class="card">
            <div class="card-header">
              <h2>Over the Counter Prescription</h2>
            </div>
            <div class="ailment-form">
              <div class="form-group">
                <label for="currentAilment"
                  >Describe Your Current Ailment:</label
                >
                <textarea
                  id="currentAilment"
                  name="currentAilment"
                  placeholder="Please describe your symptoms, how long you've had them, and any other details that might be relevant..."
                  rows="5"
                ></textarea>
              </div>
              <button id="getDiagnosisBtn" class="btn btn-primary">
                Get Recommendation
              </button>
            </div>

            <!-- Diagnosis Result Card - Initially Hidden -->
            <div
              id="diagnosisResultCard"
              class="diagnosis-result-card"
              style="display: none"
            >
              <h3>Recommended Treatment</h3>
              <div id="loadingIndicator" class="loading-indicator">
                <div class="spinner"></div>
                <p>Analyzing your health profile and symptoms...</p>
              </div>
              <div id="diagnosisContent" class="diagnosis-content"></div>
            </div>
          </div>
        </section>
      </main>

      <div id="messageContainer" class="message-container"></div>
    </div>

    <link rel="stylesheet" href="{% static 'css/get_medication.css' %}" />

    <script src="{% static 'js/get_medication.js' %}"></script>
  </body>
</html>
{% endblock %}
